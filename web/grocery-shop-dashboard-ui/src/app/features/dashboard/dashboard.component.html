<div class="dashboard">
  <!-- Loading state -->
  @if (loading()) {
    <div class="dashboard-loading">
      <span class="spinner"></span> Loading...
    </div>
  }
  
  <!-- Error state -->
  @if (error()) {
    <div class="dashboard-error">{{ error() }}</div>
  }
  
  <!-- Filters -->
  <form class="dashboard-filters" (ngSubmit)="onFilterApply()" autocomplete="off">
    <label class="filter-label">
      Select Shop:
      <select
        class="filter-input"
        [(ngModel)]="shopId"
        name="shopId"
        required
      >
        @for (shop of shops(); track shop.shopId) {
          <option [value]="shop.shopId">{{ shop.name }}</option>
        }
      </select>
      @if (loadingShops()) {
        <span class="spinner"></span>
      }
    </label>
    
    <label class="filter-label">
      From:
      <input 
        class="filter-input" 
        type="date" 
        [(ngModel)]="fromDate" 
        name="fromDate" 
        required 
      />
    </label>
    
    <label class="filter-label">
      To:
      <input 
        class="filter-input" 
        type="date" 
        [(ngModel)]="toDate" 
        name="toDate" 
        required 
      />
    </label>
    
    <button 
      class="filter-btn" 
      type="submit" 
      [disabled]="loading()"
    >
      Filter
    </button>
  </form>
  
  <!-- Chart -->
  <app-revenue-chart
    [data]="revenueData()"
    [height]="380"
    (chartReady)="onChartReady()"
  >
  </app-revenue-chart>
</div>